(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6302:(e,t,a)=>{Promise.resolve().then(a.bind(a,4119))},4119:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(4568),r=a(7620),o=a(3311),n=a(5844);function l(){let[e,t]=(0,r.useState)(!0),[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),m=(0,o.useRouter)(),g=async s=>{s.preventDefault(),u("");try{if(e){let{data:e}=await n.A.post("/auth/login",{email:a,password:i});localStorage.setItem("token",e.token),localStorage.setItem("email",e.email),m.push("/dashboard")}else await n.A.post("/auth/register",{email:a,password:i}),t(!0),alert("Registered! Please login.")}catch(e){var r,o;u((null===(o=e.response)||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.error)||"An error occurred")}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 text-gray-900",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded shadow-md w-96",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-indigo-600 text-center mb-2",children:"SSH Box"}),(0,s.jsx)("p",{className:"text-gray-500 text-center mb-6 text-sm",children:"Secure SSH Key Management"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:e?"Login":"Register"}),d&&(0,s.jsx)("p",{className:"text-red-500 text-sm mb-4",children:d}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:a,onChange:e=>l(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",value:i,onChange:e=>c(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:e?"Sign In":"Sign Up"})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{className:"text-sm text-indigo-600 hover:text-indigo-500",onClick:()=>t(!e),children:e?"Need an account? Register":"Already have an account? Login"})})]})})}},5844:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5894),r=a(4486);let o=s.A.create({baseURL:"http://localhost:3000"});o.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,async e=>{var t,a;return((null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)&&(localStorage.removeItem("token"),localStorage.removeItem("email"),localStorage.removeItem("lastSync"),await r.db.clearAll(),window.location.href="/"),Promise.reject(e)});let n=o},4486:(e,t,a)=>{"use strict";let s;a.d(t,{db:()=>l});var r=a(6314);let o="secrets";function n(){return s||(s=(0,r.P2)("ssh-box-db",1,{upgrade(e){e.objectStoreNames.contains(o)||e.createObjectStore(o,{keyPath:"id"})}})),s}let l={getAllSecrets:async()=>(await n()).getAll(o),async saveSecrets(e){let t=(await n()).transaction(o,"readwrite");for(let a of e)t.store.put(a);await t.done},async saveSecret(e){let t=await n();await t.put(o,e)},async clearAll(){let e=await n();await e.clear(o)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[815,587,855,358],()=>t(6302)),_N_E=e.O()}]);